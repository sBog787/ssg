#Основные положения

* Имена должны быть осмысленными и в едином стиле.
* Расставлять пробелы и отступы для лучшей читаемости.
* Использовать для даты и времени стандарт **ISO 8601**: YYYY-MM-DD HH:MM:SS.SSSSS.
* Использовать только стандартные функции SQL для лучшей переносимости.
* Не использовать в коде лишние элементы (ненужные скобки или кавычки).
* Комментарии в стиле си `/**/` или `--`.
* Не использовать **CamelCase**.
* Не использовать префиксы и венгерскую нотация.
* Множественное число использовать только в названии таблиц.
* Использовать только двойные кавычки для лучше переносимости.
* Не применять объектно-ориентированные принципы к структуре базе данных.

#Соглашения о наименовании

##Общее

* Имя не должно быть в списке зарезервированных ключевых слов.
* Длина имени должна быть не больше 30 символов.
* Начинать имя с буквы и не заканчивать символом подчеркивания.
* Использовать в именах только буквы, цифры и символ подчеркивания.
* Избегать несколько подряд идущих символов подчеркивания.
* Использовать символ подчеркивания вместо пробела.
* Не использовать сокращений.

##Таблицы

* Использовать в названии таблиц множественное число.
* Не допускать совпадение названия таблицы с названием столбца таблицы.
* Название таблицы отношения "многие ко многим" в виде `table_name_1_table_name_2_map`.

##Столбцы

* Название столбца всегда в единственном числе.
* Использовать id в качестве первичного ключа.
* Название всегда пишется строчными буквами.
* Не создать столбцы с таким же название как у таблицы.

##Псевдонимы

* Должны быть связаны с объектами или выражениями.
* Имя псевдонима составляется из первых букв каждого слова в имени объекта.
* Добавить цифру к имени псевдонима, если такое уже существует.
* Всегда использовать ключевое слово `AS` для лучшей читаемости.

##Суффиксы

* `_status` - статус.
* `_flag` - флаг.
* `_total` - общее количество или сумма.
* `_num` - поле, содержащее число.
* `_name` - имя.
* `_date` - дата.
* `_tally` - счетчик.
* `_size` - размер.
* `_addr` - адрес.
* `_position` - позиция. 
* `_id` - идентификатор.

#Синтаксис запросов

* Зарезервированные ключевые слова всегда писать прописными буквами.
* Не использовать сокращенный вариант ключевого слова.
* Не использовать специфичные для конкретной СУБД ключевые слова для лучшей переносимости.
* Использовать отступы и пробелы для лучшей читаемости.
* Отделять подзапросы и объединения от основного запроса.
* Использовать `BETWEEN` где возможно, вместо нескольких условий `AND`.
* Использовать `IN` вместо `OR` где возможно.
* Использовать `CASE`, если значение должно быть интепретировано до окончания выполнения запроса. С помощью `CASE` можно формировать сложные логические структуры.
* Избегать использования `UNION` и временных таблиц.

##Синтаксис CREATE

Внутри объявления `CREATE` делать отступ.

###Типы данных

* Не использовать специфичные для СУБД типы данных для лучшей переносимости.
* Для работы с плавающей точкой использовать только `REAL` и `FLOAT`, но где нет необходимости в подобных вычислениях, всегда используйте `NUMERIC` и `DECIMAL`.

###Значения по умолчанию

* Всегда должны совпадать по типу со столбцом.
* Должны распологаться после объявления типа столбца и перед пометкой `NOT NULL`.

###Ключи

* Должны быть уникальными.
* Должны быть одного типа во всей схеме.
* Должны быть как можно проще, чтобы можно было без трудностей использовать составные ключи.
* Должны быть первым столбцом.
* Объявление первичного ключа должно быть в самом начале, сразу после оператора `CREATE TABLE`.

###Ограничения

* У каждой таблицы должен быть первичный ключ.
* Должны иметь осмысленные имена.
* Должны быть объявлены строго ниже столбца, с которым они связаны, если ограничение затрагивает несколько столбцов, то оно должно стоять после последнего из них.
* Ограничения целостности уровня таблицы должны распологаться в конце.
* Использовать алфавитный порядок, например `ON DELETE` предшествует `ON UPDATE`. 

###Валидация

* Использовать `LIKE` и `SIMILAR TO` для обеспечения целостности строк с известным форматом.
* Если диапазон числовых значений для столбца известен, использовать `CHECK()` для предотвращения внесения в базу некорректных данных. Обычно проверка делается, что значение больше нуля.
* `CHECK()` должен быть объявлен как отдельное ограничение для упрощения последующей отладки.

```
CREATE TABLE IF NOT EXISTS apelacio_appeals (
    PRIMARY KEY (id),
    id                   INT NOT NULL,
    type_id              TINYINT DEFAULT 0 NOT NULL, -- внешний ключ
    second_name          CHAR(255) NOT NULL,
    first_name           CHAR(255) NOT NULL,
    patronymic           CHAR(255) NOT NULL,
    email                CHAR(255) NOT NULL,
    text                 TEXT(65535) NOT NULL,
    processing_status_id TINYINT(1) DEFAULT 0 NOT NULL, -- внешний ключ
    creation_date        DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,
    agree_flag           TINYINT DEFAULT 0 NOT NULL,
    delete_flag          TINYINT DEFAULT 0 NOT NULL,
                         CONSTRAINT type_id_range 
                            CHECK (type_id >= 0 AND type_id <= 3),
                         CONSTRAINT processing_status_id_range
                            CHECK (processing_status_id >= 0 AND processing_status_id <= 2)
);
```

Избегать
========

* Не применять объектно-ориентированные принципы, так как они не всегда оптимально ложаться на реляционную модель баз данных.
* Не разносить значения и единицы измерения по разным столбцам. Нужно создавать столбцы так, чтобы единицы измерения были чем-то самим собой разумеющимся. Для проверки корректности вставляемых в столбец данных используйте `CHECK()`.
* Избегать паттерна **Entity Attribute Value**.
* Не разбивать данные, логически принадлежащие одной таблице, по разным таблицам, чтобы избежать использования `UNION` вместо простых запросов.
